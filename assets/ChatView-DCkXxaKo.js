import{_ as d,o as a,c as i,F as x,a as l,b,r as Y,u as h,d as m,e as K,t as C,n as f,m as M,f as G,g as D,w as Q,v as ee,h as v,i as te,j as H,k as N,l as u,p as L,q as B,s as se,x as ae,y as ne,z as ie,A as oe,B as le}from"./index-CdGgSlsy.js";const ce={},re={d:"M7.77201 2.43899L8.84801 2.09499C9.85801 1.77299 10.935 2.29399 11.368 3.31199L12.227 5.33999C12.601 6.22299 12.394 7.26199 11.713 7.90799L9.81901 9.70599C9.93501 10.782 10.297 11.841 10.903 12.883C11.4788 13.8912 12.251 14.7736 13.174 15.478L15.449 14.718C16.312 14.431 17.251 14.762 17.779 15.539L19.012 17.349C19.627 18.253 19.517 19.499 18.754 20.265L17.936 21.086C17.122 21.903 15.959 22.2 14.884 21.864C12.345 21.072 10.011 18.721 7.88101 14.811C5.74801 10.895 4.99501 7.57099 5.62301 4.84299C5.88701 3.69499 6.70401 2.77999 7.77201 2.43899Z"};function de(e,t){return a(),i("path",re)}const ue=d(ce,[["render",de]]),_e={},he={d:"M12 1.99899C17.524 1.99899 22.002 6.47699 22.002 12.001C22.002 17.524 17.524 22.002 12 22.002C6.476 22.002 1.998 17.524 1.998 12.001C1.998 6.47699 6.476 1.99899 12 1.99899ZM12 3.49899C10.8758 3.4868 9.76036 3.69769 8.71822 4.11946C7.67608 4.54124 6.72793 5.16551 5.92866 5.95616C5.12939 6.74681 4.49487 7.68813 4.06182 8.72563C3.62877 9.76314 3.4058 10.8762 3.4058 12.0005C3.4058 13.1248 3.62877 14.2378 4.06182 15.2754C4.49487 16.3129 5.12939 17.2542 5.92866 18.0448C6.72793 18.8355 7.67608 19.4597 8.71822 19.8815C9.76036 20.3033 10.8758 20.5142 12 20.502C14.232 20.4678 16.361 19.5571 17.9274 17.9665C19.4937 16.376 20.3716 14.2333 20.3716 12.001C20.3716 9.76871 19.4937 7.62597 17.9274 6.03545C16.361 4.44493 14.232 3.53423 12 3.49999V3.49899ZM8.462 14.784C8.88275 15.32 9.41996 15.7532 10.0329 16.0509C10.6459 16.3485 11.3186 16.5028 12 16.502C12.6806 16.5028 13.3524 16.3489 13.9648 16.0519C14.5772 15.755 15.1141 15.3228 15.535 14.788C15.6583 14.6319 15.8386 14.5312 16.0362 14.5081C16.2337 14.4849 16.4324 14.5412 16.5885 14.6645C16.7446 14.7878 16.8453 14.9681 16.8684 15.1657C16.8916 15.3632 16.8353 15.5619 16.712 15.718C16.1507 16.4306 15.435 17.0064 14.6187 17.4021C13.8025 17.7977 12.9071 18.0028 12 18.002C11.0918 18.0027 10.1952 17.797 9.37821 17.4002C8.5612 17.0035 7.84508 16.4262 7.284 15.712C7.1662 15.5553 7.11439 15.3588 7.13968 15.1644C7.16497 14.9701 7.26533 14.7933 7.41929 14.6721C7.57326 14.5508 7.76858 14.4946 7.96346 14.5155C8.15834 14.5364 8.33729 14.6328 8.462 14.784ZM9 8.74999C9.16706 8.74527 9.33337 8.77409 9.4891 8.83476C9.64483 8.89542 9.78681 8.9867 9.90665 9.1032C10.0265 9.21969 10.1217 9.35904 10.1868 9.51298C10.2518 9.66693 10.2854 9.83237 10.2854 9.99949C10.2854 10.1666 10.2518 10.3321 10.1868 10.486C10.1217 10.64 10.0265 10.7793 9.90665 10.8958C9.78681 11.0123 9.64483 11.1036 9.4891 11.1642C9.33337 11.2249 9.16706 11.2537 9 11.249C8.67473 11.2398 8.36587 11.1041 8.13906 10.8708C7.91224 10.6375 7.78535 10.3249 7.78535 9.99949C7.78535 9.67409 7.91224 9.36152 8.13906 9.1282C8.36587 8.89488 8.67473 8.7592 9 8.74999ZM15 8.74999C15.1671 8.74527 15.3334 8.77409 15.4891 8.83476C15.6448 8.89542 15.7868 8.9867 15.9066 9.1032C16.0265 9.21969 16.1217 9.35904 16.1868 9.51298C16.2518 9.66693 16.2854 9.83237 16.2854 9.99949C16.2854 10.1666 16.2518 10.3321 16.1868 10.486C16.1217 10.64 16.0265 10.7793 15.9066 10.8958C15.7868 11.0123 15.6448 11.1036 15.4891 11.1642C15.3334 11.2249 15.1671 11.2537 15 11.249C14.6747 11.2398 14.3659 11.1041 14.1391 10.8708C13.9122 10.6375 13.7854 10.3249 13.7854 9.99949C13.7854 9.67409 13.9122 9.36152 14.1391 9.1282C14.3659 8.89488 14.6747 8.7592 15 8.74999Z"};function me(e,t){return a(),i("path",he)}const Ce=d(_e,[["render",me]]),fe={},ge={d:"M 19.5,3.5 C 21.0847,4.00238 21.5847,5.00238 21,6.5C 16.6667,10.8333 12.3333,15.1667 8,19.5C 6,17.5 4,15.5 2,13.5C 1.40921,12.5165 1.74254,11.8499 3,11.5C 4.9439,12.4394 6.61056,13.7727 8,15.5C 12.037,11.631 15.8704,7.63104 19.5,3.5 Z"};function ve(e,t){return a(),i("path",ge)}const pe=d(fe,[["render",ve]]),$e={},be={d:"M3.00001 17H21C21.2549 17.0003 21.5 17.0979 21.6854 17.2728C21.8707 17.4478 21.9822 17.687 21.9972 17.9414C22.0121 18.1958 21.9293 18.4464 21.7657 18.6418C21.6022 18.8373 21.3701 18.9629 21.117 18.993L21 19H3.00001C2.74513 18.9997 2.49997 18.9021 2.31464 18.7272C2.1293 18.5522 2.01777 18.313 2.00283 18.0586C1.9879 17.8042 2.07068 17.5536 2.23427 17.3582C2.39786 17.1627 2.62991 17.0371 2.88301 17.007L3.00001 17H21H3.00001ZM3.00001 11L21 10.998C21.2549 10.9983 21.5 11.0959 21.6854 11.2708C21.8707 11.4458 21.9822 11.685 21.9972 11.9394C22.0121 12.1938 21.9293 12.4444 21.7657 12.6398C21.6022 12.8353 21.3701 12.9609 21.117 12.991L21 12.998L3.00001 13C2.74513 12.9997 2.49997 12.9021 2.31464 12.7272C2.1293 12.5522 2.01777 12.313 2.00283 12.0586C1.9879 11.8042 2.07068 11.5536 2.23427 11.3582C2.39786 11.1627 2.62991 11.0371 2.88301 11.007L3.00001 11L21 10.998L3.00001 11ZM3.00001 5H21C21.2549 5.00028 21.5 5.09788 21.6854 5.27285C21.8707 5.44782 21.9822 5.68695 21.9972 5.94139C22.0121 6.19584 21.9293 6.44638 21.7657 6.64183C21.6022 6.83729 21.3701 6.9629 21.117 6.993L21 7H3.00001C2.74513 6.99972 2.49997 6.90212 2.31464 6.72715C2.1293 6.55218 2.01777 6.31305 2.00283 6.05861C1.9879 5.80416 2.07068 5.55362 2.23427 5.35817C2.39786 5.16271 2.62991 5.0371 2.88301 5.007L3.00001 5H21H3.00001Z"};function ye(e,t){return a(),i("path",be)}const Se=d($e,[["render",ye]]),xe={},Me={d:"M12 8C11.4696 8 10.9609 7.78929 10.5858 7.41421C10.2107 7.03914 10 6.53043 10 6C10 5.46957 10.2107 4.96086 10.5858 4.58579C10.9609 4.21071 11.4696 4 12 4C12.5304 4 13.0391 4.21071 13.4142 4.58579C13.7893 4.96086 14 5.46957 14 6C14 6.53043 13.7893 7.03914 13.4142 7.41421C13.0391 7.78929 12.5304 8 12 8ZM12 14C11.4696 14 10.9609 13.7893 10.5858 13.4142C10.2107 13.0391 10 12.5304 10 12C10 11.4696 10.2107 10.9609 10.5858 10.5858C10.9609 10.2107 11.4696 10 12 10C12.5304 10 13.0391 10.2107 13.4142 10.5858C13.7893 10.9609 14 11.4696 14 12C14 12.5304 13.7893 13.0391 13.4142 13.4142C13.0391 13.7893 12.5304 14 12 14ZM10 18C10 18.5304 10.2107 19.0391 10.5858 19.4142C10.9609 19.7893 11.4696 20 12 20C12.5304 20 13.0391 19.7893 13.4142 19.4142C13.7893 19.0391 14 18.5304 14 18C14 17.4696 13.7893 16.9609 13.4142 16.5858C13.0391 16.2107 12.5304 16 12 16C11.4696 16 10.9609 16.2107 10.5858 16.5858C10.2107 16.9609 10 17.4696 10 18Z"};function we(e,t){return a(),i("path",Me)}const Te=d(xe,[["render",we]]),ke={},Ie={d:"M9.99997 2.5C11.3979 2.49994 12.7681 2.89061 13.9559 3.62792C15.1436 4.36523 16.1016 5.41983 16.7218 6.6727C17.342 7.92558 17.5997 9.32686 17.4658 10.7184C17.3319 12.11 16.8117 13.4364 15.964 14.548L20.707 19.293C20.8863 19.473 20.9904 19.7144 20.9982 19.9684C21.006 20.2223 20.9168 20.4697 20.7487 20.6603C20.5807 20.8508 20.3464 20.9703 20.0935 20.9944C19.8406 21.0185 19.588 20.9454 19.387 20.79L19.293 20.707L14.548 15.964C13.601 16.6861 12.4956 17.1723 11.3234 17.3824C10.1512 17.5925 8.9458 17.5204 7.80697 17.1721C6.66814 16.8238 5.62862 16.2094 4.77443 15.3795C3.92023 14.5497 3.27592 13.5285 2.8948 12.4002C2.51368 11.2719 2.40672 10.0691 2.58277 8.89131C2.75881 7.7135 3.2128 6.59454 3.90717 5.62703C4.60153 4.65951 5.51631 3.87126 6.57581 3.32749C7.63532 2.78372 8.80908 2.50006 9.99997 2.5ZM9.99997 4.5C8.54128 4.5 7.14233 5.07946 6.11088 6.11091C5.07943 7.14236 4.49997 8.54131 4.49997 10C4.49997 11.4587 5.07943 12.8576 6.11088 13.8891C7.14233 14.9205 8.54128 15.5 9.99997 15.5C11.4587 15.5 12.8576 14.9205 13.8891 13.8891C14.9205 12.8576 15.5 11.4587 15.5 10C15.5 8.54131 14.9205 7.14236 13.8891 6.11091C12.8576 5.07946 11.4587 4.5 9.99997 4.5Z"};function Le(e,t){return a(),i("path",Ie)}const Be=d(ke,[["render",Le]]),Ne={},Ee={d:"M12.815 12.197L5.28302 13.453C5.19642 13.4675 5.11516 13.5045 5.0474 13.5603C4.97964 13.6161 4.92778 13.6888 4.89702 13.771L2.30002 20.728C2.05202 21.368 2.72102 21.978 3.33502 21.671L21.335 12.671C21.4597 12.6088 21.5646 12.513 21.6379 12.3945C21.7111 12.276 21.75 12.1394 21.75 12C21.75 11.8607 21.7111 11.7241 21.6379 11.6055C21.5646 11.487 21.4597 11.3913 21.335 11.329L3.33502 2.32901C2.72102 2.02201 2.05202 2.63301 2.30002 3.27201L4.89802 10.229C4.92863 10.3114 4.98044 10.3843 5.04821 10.4403C5.11598 10.4963 5.19731 10.5335 5.28402 10.548L12.816 11.803C12.8624 11.8111 12.9044 11.8353 12.9346 11.8714C12.9649 11.9074 12.9815 11.9529 12.9815 12C12.9815 12.0471 12.9649 12.0926 12.9346 12.1287C12.9044 12.1647 12.8624 12.1889 12.816 12.197H12.815Z"};function ze(e,t){return a(),i("path",Ee)}const Fe=d(Ne,[["render",ze]]),De={},Ve=l("path",{d:"M12.3 2.90001C12.4 3.00001 12.5 3.00001 12.6 3.10001C13.3 3.70001 13.9 4.20001 14.6 4.80001C14.9 5.00001 15.2 5.20001 15.5 5.20001C16.4 5.30001 17.2 5.40001 18.1 5.40001C18.6 5.40001 18.7 5.50001 18.8 6.10001C18.9 7.00001 18.9 7.90001 19 8.70001C19 9.10001 19.2 9.40001 19.4 9.70001C20 10.4 20.5 11 21.1 11.7C21.4 12.1 21.4 12.2 21.1 12.5C20.6 13.1 20 13.8 19.5 14.4C19.2 14.7 19 15.1 19 15.6C18.9 16.4 18.8 17.3 18.8 18.1C18.8 18.5 18.6 18.6 18.2 18.7C17.4 18.7 16.6 18.8 15.7 18.9C15.2 18.9 14.7 19.1 14.3 19.4C13.7 19.9 13 20.5 12.4 21C12.1 21.3 11.9 21.3 11.6 21C10.9 20.4 10.2 19.8 9.60001 19.2C9.30001 19 9.00001 18.8 8.70001 18.8C7.80001 18.7 6.90001 18.6 6.00001 18.6C5.60001 18.6 5.50001 18.4 5.40001 18.1C5.40001 17.2 5.30001 16.4 5.20001 15.5C5.20001 15.1 5.00001 14.7 4.80001 14.4C4.20001 13.8 3.70001 13.1 3.20001 12.4C2.80001 12 2.90001 11.9 3.20001 11.4C3.80001 10.8 4.30001 10.1 4.90001 9.50001C5.20001 9.20001 5.30001 8.90001 5.30001 8.50001C5.30001 7.70001 5.40001 6.90001 5.50001 6.00001C5.50001 5.50001 5.60001 5.40001 6.10001 5.40001C7.00001 5.30001 7.80001 5.30001 8.70001 5.20001C9.10001 5.20001 9.40001 5.00001 9.70001 4.80001C10.4 4.20001 11.1 3.60001 11.8 3.10001C11.9 2.90001 12.1 2.80001 12.3 2.90001Z"},null,-1),je=l("path",{d:"M16.4 10.1L16.2 10.3L10.8 15.7C10.7 15.8 10.6 15.9 10.4 15.7L7.80001 13.1C7.60001 12.9 7.70001 12.8 7.80001 12.7C8.00001 12.5 8.30001 12.1 8.50001 12.1C8.80001 12.1 9.00001 12.5 9.20001 12.7L10.3 13.8C10.5 14 10.6 14 10.8 13.8L15.1 9.50001C15.3 9.30001 15.5 9.20001 15.7 9.50001C15.8 9.70001 16 9.80001 16.1 10C16.3 10 16.4 10.1 16.4 10.1Z",fill:"white"},null,-1);function Ge(e,t){return a(),i(x,null,[Ve,je],64)}const He=d(De,[["render",Ge]]),Ze={call:ue,emoji:Ce,check:pe,menu:Se,more:Te,search:Be,send:Fe,verified:He},Je=["width","height","aria-labelledby"],Oe=["fill"],Ue={__name:"IconBase",props:{iconName:{type:String,default:"box"},width:{type:[Number,String],default:24},height:{type:[Number,String],default:24},iconColor:{type:String,default:"currentColor"}},setup(e){return(t,s)=>(a(),i("svg",{xmlns:"http://www.w3.org/2000/svg",width:e.width,height:e.height,viewBox:"0 0 24 24","aria-labelledby":e.iconName,role:"presentation"},[l("g",{fill:e.iconColor},[(a(),b(Y(h(Ze)[e.iconName])))],8,Oe)],8,Je))}},y=d(Ue,[["__scopeId","data-v-94d8dd11"]]),Ae={blue:"button--blue",grey:"button--grey"},qe={grey:"input--grey"},Re={white:"message--white",green:["message--green"]},Pe={small:"input--small",medium:"input--medium"},We={small:"avatar--small",medium:"avatar--medium"},Xe=["type","disabled"],Ye={__name:"ButtonComponent",props:{type:{type:String,default:"button"},text:{type:String},disabled:{type:Boolean},theme:{type:String,default:"blue"},iconName:{type:String},prefixIcon:{type:Boolean,default:!1},suffixIcon:{type:Boolean,default:!1},widthIcon:{type:[Number,String]},heightIcon:{type:[Number,String]}},setup(e){return(t,s)=>(a(),i("div",null,[l("button",{class:f([h(Ae)[e.theme],"button"]),type:e.type,disabled:e.disabled,onClick:s[0]||(s[0]=n=>t.$emit("buttonClick"))},[e.iconName&&e.prefixIcon?(a(),b(y,{key:0,"icon-name":e.iconName,width:e.widthIcon,height:e.heightIcon},null,8,["icon-name","width","height"])):m("",!0),K(" "+C(e.text)+" ",1),e.iconName&&e.suffixIcon?(a(),b(y,{key:1,"icon-name":e.iconName,width:e.widthIcon,height:e.heightIcon},null,8,["icon-name","width","height"])):m("",!0)],10,Xe)]))}},$=d(Ye,[["__scopeId","data-v-8867bda3"]]),Ke={class:"input-wrapper"},Qe={key:0,class:"input__slot-wrapper input__slot--prefix"},e1={class:"input__slot"},t1={key:1,class:"input__slot-wrapper input__slot--suffix"},s1={class:"input__slot"},a1=["placeholder","disabled"],n1={__name:"InputComponent",props:M({placeholder:{type:String,default:"Введите текст"},disabled:{type:Boolean,default:!1},size:{type:String,default:"medium"},theme:{type:String},circle:{type:Boolean,default:!1},prefixElement:{type:Boolean,default:!1},suffixElement:{type:Boolean,default:!1}},{modelValue:{},modelModifiers:{}}),emits:M(["focus_changed"],["update:modelValue"]),setup(e){const t=e,s=G(e,"modelValue"),n={"input--circle":t.circle,"input--prefix-element":t.prefixElement,"input--suffix-element":t.suffixElement};return(c,o)=>(a(),i("div",Ke,[e.prefixElement?(a(),i("div",Qe,[l("div",e1,[D(c.$slots,"prefixElement",{},void 0)])])):m("",!0),e.suffixElement?(a(),i("div",t1,[l("div",s1,[D(c.$slots,"suffixElement",{},void 0)])])):m("",!0),Q(l("input",{"onUpdate:modelValue":o[0]||(o[0]=r=>s.value=r),class:f([n,h(Pe)[e.size],h(qe)[e.theme],"input"]),placeholder:e.placeholder,disabled:e.disabled,onFocus:o[1]||(o[1]=r=>c.$emit("focus_changed",!0)),onBlur:o[2]||(o[2]=r=>c.$emit("focus_changed",!1))},null,42,a1),[[ee,s.value]])]))}},Z=d(n1,[["__scopeId","data-v-3cd8578a"]]),J=e=>e.split("")[0].toUpperCase(),V=e=>e%2===1,i1=({status:e,last_seen_date:t})=>{if(e==="online")return"В сети";const s=Date.now(),n=new Date(t).getTime(),c=Math.trunc(s-n),o=Math.trunc(c/1e3/60);let r=null,_=null;return o<1?"Недавно был в сети":(o>=60&&(r=Math.trunc(o/60)),r>=24&&(_=Math.trunc(r/24)),_?`Был в сети ${_} ${I(_,["день","дня","дней"])} назад`:r?`Был в сети ${r} ${I(r,["час","часа","часов"])} назад`:`Был в сети ${o} ${I(o,["минуту","минуты","минут"])} назад`)},I=(e,t)=>{let s=[],n=[2,0,1,1,1,2];return s[e]||(s[e]=e%100>4&&e%100<20?2:n[Math.min(e%10,5)]),t[s[e]]},O=e=>{const t=new Date(e),s=t.getHours(),n=t.getMinutes();return`${s<10?"0"+s:s}:${n<10?"0"+n:n}`},o1=(e=[])=>{const t=j(new Date().toISOString()),s={};return e.length?(e.forEach(n=>{const c=j(n.sent_date);c.full_date in s||(s[c.full_date]={date_string:c.day===t.day?"Сегодня":`${c.full_date}`,messages:[]}),s[c.full_date].messages.push({...n,sent_time:O(n.sent_date)})}),s):{}},j=e=>{const t=new Date(e);return{full_date:("0"+t.getDate()).slice(-2)+"."+("0"+(t.getMonth()+1)).slice(-2)+"."+t.getFullYear(),day:t.getDate()}},l1=e=>{const t=e.messages.filter(c=>!c.read).length,s=e.messages.at(-1),n={id:e.id,...e.avatar_url&&{avatar_url:e.avatar_url},...e.name&&{name:e.name},verified:e.verified,...e.is_active&&{is_active:e.is_active},unread_messages_count:t,status:i1({status:e.status,last_seen_date:e.last_seen_date}),messages:o1(e.messages)};return s&&(n.last_message={...s,sent_time:O(s.sent_date)}),n},c1="/chat/assets/avatar-1-BXKJm__d.jpg",r1="/chat/assets/avatar-2-_LUShI-H.png",d1="/chat/assets/avatar-3-D9sdvg54.png",u1="/chat/assets/avatar-4-BUV9kTGZ.png",_1="/chat/assets/avatar-5-DF5j0wnG.jpg",h1="/chat/assets/avatar-6-DF8aQuMN.png",m1="/chat/assets/avatar-7-BrfZMatY.jpg",C1={key:0,class:"avatar__photo"},f1=["src"],g1={key:1,class:"avatar__stub"},v1={class:"avatar__stub-text"},p1={__name:"AvatarComponent",props:{photoName:{type:String},size:{type:String,default:"medium"},stubText:{type:String}},setup(e){const t=e,s=v(null);te(()=>{s.value=n()}),H(()=>{s.value=n()});const n=()=>{if(t.photoName){o.value=!0;const _=new URL(Object.assign({"../assets/images/avatar-1.jpg":c1,"../assets/images/avatar-2.png":r1,"../assets/images/avatar-3.png":d1,"../assets/images/avatar-4.png":u1,"../assets/images/avatar-5.jpg":_1,"../assets/images/avatar-6.png":h1,"../assets/images/avatar-7.jpg":m1})[`../assets/images/${t.photoName}`],import.meta.url).href;return c.value=!0,_}return o.value=!1,null},c=v(!1),o=v(!1),r=function(_){const{type:g}=_;g==="error"&&(c.value=!1),g==="load"&&(c.value=!0)};return(_,g)=>(a(),i("div",{class:f([h(We)[e.size],"avatar"])},[c.value&&o.value?(a(),i("div",C1,[l("img",{class:"avatar__photo--img",src:s.value,onError:r,onLoad:r},null,40,f1)])):(a(),i("div",g1,[l("span",v1,C(e.stubText),1)]))],2))}},U=d(p1,[["__scopeId","data-v-51b7a010"]]),$1={class:"chat-wrapper"},b1=["id"],y1={class:"chat__title"},S1={class:"chat__name"},x1={class:"chat__name-text"},M1={key:0,class:"chat__date"},w1={key:0,class:"chat__message"},T1={class:"chat__message-text"},k1={key:0,class:"chat__message-count"},I1={__name:"ChatItemComponent",props:{chat:{type:Object,required:!0},isFullSize:{type:[Boolean,null],default:!0},animation:{type:Boolean,default:!1}},setup(e){const t=e,s=N(()=>{if(t.isFullSize===null)return"chat__info--hidden";if(t.animation){if(t.isFullSize)return"chat__info--animation-open";if(!t.isFullSize)return"chat__info--animation-close"}else if(!t.isFullSize)return"chat__info--hidden";return null});return(n,c)=>(a(),i("div",$1,[l("div",{class:f(["chat",[{"chat--active":e.chat.is_active},e.animation||e.isFullSize?"":"chat--small"]]),id:e.chat.id},[u(U,{class:"chat__avatar",stubText:h(J)(e.chat.name),photoName:e.chat.avatar_url},null,8,["stubText","photoName"]),l("div",{class:f([s.value,"chat__info"])},[l("div",y1,[l("div",S1,[l("div",x1,C(e.chat.name),1),e.chat.verified?(a(),b(y,{key:0,class:"chat__name-icon","icon-name":"verified","icon-color":"#1a9cff",width:"18",height:"18"})):m("",!0)]),e.chat.last_message?(a(),i("span",M1,C(e.chat.last_message.sent_time),1)):m("",!0)]),e.chat.last_message?(a(),i("div",w1,[l("span",T1,C(e.chat.last_message.text),1),e.chat.unread_messages_count!==0?(a(),i("span",k1,C(e.chat.unread_messages_count),1)):m("",!0)])):m("",!0)],2)],10,b1)]))}},L1=d(I1,[["__scopeId","data-v-fe73f195"]]),B1={class:"chat-list__wrapper"},N1={__name:"ChatListComponent",props:{chats:{type:Array,required:!0},isFullSize:{type:Boolean,default:!0},animation:{type:Boolean,default:!1}},setup(e){return(t,s)=>(a(),i("div",B1,[(a(!0),i(x,null,L(e.chats,n=>(a(),i("div",{class:"chat-list",key:n.id},[u(L1,{chat:n,isFullSize:e.isFullSize,animation:e.animation,onClick:c=>t.$emit("chatSelect",n.id)},null,8,["chat","isFullSize","animation","onClick"])]))),128))]))}},E1=d(N1,[["__scopeId","data-v-34d5a307"]]),z1={class:"sidebar__wrapper"},F1={class:"sidebar__control-panel"},D1={key:0,class:"sidebar__list"},V1={key:1,class:"sidebar__list-stub"},j1={key:2,class:"sidebar__list-stub--small"},G1={__name:"ChatSidebarComponent",props:M({chats:{type:Array,required:!0},isFullSize:{type:[Boolean,null],default:!0},animation:{type:Boolean,default:!1},isDisabledOpenSideBar:{type:Boolean,default:!1}},{modelValue:{},modelModifiers:{}}),emits:M(["sideBarClick","chatSelect"],["update:modelValue"]),setup(e){const t=G(e,"modelValue"),s=e,n=N(()=>s.isFullSize===null?"sidebar__search--hidden":s.isFullSize?"sidebar__search--animation-open":s.isFullSize?null:"sidebar__search--animation-close");return(c,o)=>(a(),i("div",z1,[l("div",{class:f([{"sidebar--small":!e.isFullSize},"sidebar"])},[l("div",F1,[u($,{class:"sidebar__button",prefixIcon:"",iconName:"menu",theme:"grey",disabled:e.isDisabledOpenSideBar,onClick:o[0]||(o[0]=r=>c.$emit("sideBarClick"))},null,8,["disabled"]),l("div",{class:f([n.value,"sidebar__search"])},[u(Z,{placeholder:"Поиск",circle:"",size:"small",theme:"grey",prefixElement:"",disabled:e.chats.length===0,modelValue:t.value,"onUpdate:modelValue":o[1]||(o[1]=r=>t.value=r)},{prefixElement:B(()=>[u(y,{"icon-name":"search","icon-color":"#707991"})]),_:1},8,["disabled","modelValue"])],2)]),e.chats.length!==0?(a(),i("div",D1,[u(E1,{chats:e.chats,isFullSize:e.isFullSize,animation:e.animation,onChatSelect:o[2]||(o[2]=r=>c.$emit("chatSelect",r))},null,8,["chats","isFullSize","animation"])])):m("",!0),e.isFullSize&&e.chats.length===0?(a(),i("div",V1," Список пуст ")):m("",!0),!e.isFullSize&&e.chats.length===0?(a(),i("div",j1)):m("",!0)],2)]))}},H1=d(G1,[["__scopeId","data-v-6813f5a2"]]),Z1={class:"top-bar__wrapper"},J1={class:"top-bar"},O1={class:"top-bar__user"},U1={class:"top-bar__user-info"},A1={class:"top-bar__user-name"},q1={class:"top-bar__user-name-text"},R1={class:"top-bar__user-status"},P1={class:"top-bar__control-buttons"},W1={__name:"TopBarComponent",props:{chat:{type:Object,required:!0}},setup(e){return(t,s)=>(a(),i("div",Z1,[l("div",J1,[l("div",O1,[u(U,{size:"small",stubText:h(J)(e.chat.name),photoName:e.chat.avatar_url},null,8,["stubText","photoName"]),l("div",U1,[l("div",A1,[l("span",q1,C(e.chat.name),1),e.chat.verified?(a(),b(y,{key:0,class:"top-bar__user-icon","icon-name":"verified","icon-color":"#1a9cff",width:"18",height:"18"})):m("",!0)]),l("span",R1,C(e.chat.status),1)])]),l("div",P1,[u($,{prefixIcon:"",iconName:"search",theme:"grey",onClick:s[0]||(s[0]=n=>t.$emit("searchClick"))}),u($,{prefixIcon:"",iconName:"call",theme:"grey",onClick:s[1]||(s[1]=n=>t.$emit("callClick"))}),u($,{prefixIcon:"",iconName:"more",theme:"grey",onClick:s[2]||(s[2]=n=>t.$emit("optionsClick"))})])])]))}},X1=d(W1,[["__scopeId","data-v-29e1cf07"]]),Y1={class:"message__wrapper"},K1=["id"],Q1={class:"message__text"},et={class:"message__time"},tt={__name:"MessageComponent",props:{message:{type:Object,required:!0},theme:{type:String,default:"green"}},setup(e){return(t,s)=>(a(),i("div",Y1,[l("div",{class:f([h(Re)[e.theme],"message"]),id:e.message.id},[l("span",Q1,C(e.message.text),1),l("div",{class:f([e.theme==="green"?"message__info--white":"","message__info"])},[l("span",et,C(e.message.sent_time),1),u(y,{"icon-name":"check",width:"14",height:"14"})],2)],10,K1)]))}},st=d(tt,[["__scopeId","data-v-6448dd8f"]]),at={class:"messages__wrapper"},nt={key:0,class:"messages"},it={class:"messages__date-sent"},ot={key:1,class:"messages__stub"},lt={__name:"MessagesListComponent",props:{messages:{type:Object,required:!0}},setup(e){return(t,s)=>(a(),i("div",at,[Object.keys(e.messages).length!==0?(a(),i("div",nt,[(a(!0),i(x,null,L(e.messages,(n,c)=>(a(),i("div",{key:c,class:"messages__day-group"},[l("div",it,C(n.date_string),1),(a(!0),i(x,null,L(n.messages,o=>(a(),b(st,{key:o.id,message:o,theme:h(V)(o.id)?"white":"green",class:f([h(V)(o.id)?"":"messages__item--rignt","messages__item"])},null,8,["message","theme","class"]))),128))]))),128))])):(a(),i("div",ot,"Список сообщений пуст"))]))}},ct=d(lt,[["__scopeId","data-v-427ce5cc"]]),rt=se({id:"chats",state:()=>({chats:[{id:1,avatar_url:"",name:"New chat",verified:!0,status:"offline",last_seen_date:"Thu Jun 26 2024 00:11:02 GMT+0300 (Москва, стандартное время)",messages:[]},{id:2,avatar_url:"avatar-1.jpg",name:"Jessica Drew",verified:!1,status:"offline",last_seen_date:"Thu Jun 26 2024 23:11:02 GMT+0300 (Москва, стандартное время)",messages:[{id:1,text:"Ок, увидимся позже",sent_date:"Thu Jun 26 2024 18:30:02 GMT+0300 (Москва, стандартное время)",read:!1}]},{id:3,avatar_url:"avatar-2.png",name:"David Moore",verified:!0,status:"offline",last_seen_date:"Thu Jun 26 2024 23:11:02 GMT+0300 (Москва, стандартное время)",messages:[{id:1,text:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.",sent_date:"Thu Jun 26 2024 00:11:02 GMT+0300 (Москва, стандартное время)",read:!0},{id:2,text:"Ок, увидимся",sent_date:"Thu Jun 26 2024 18:16:02 GMT+0300 (Москва, стандартное время)",read:!0}]},{id:4,avatar_url:"avatar-3.png",name:"Чат 4",verified:!1,status:"offline",last_seen_date:"Thu Jun 25 2024 00:11:02 GMT+0300 (Москва, стандартное время)",messages:[{id:1,text:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.",sent_date:"Thu Jun 24 2024 18:12:02 GMT+0300 (Москва, стандартное время)",read:!1}]},{id:5,avatar_url:"avatar-4.png",name:"Чат 5",verified:!1,status:"offline",last_seen_date:"Thu Jun 25 2024 00:11:02 GMT+0300 (Москва, стандартное время)",messages:[{id:1,text:"Завтра напомни мне по поводу дня X",sent_date:"Thu Jun 24 2024 17:42:02 GMT+0300 (Москва, стандартное время)",read:!0}]},{id:6,avatar_url:"avatar-5.jpg",name:"Чат 7",verified:!1,status:"offline",last_seen_date:"Thu Jun 25 2024 00:11:02 GMT+0300 (Москва, стандартное время)",messages:[{id:1,text:"Все готово",sent_date:"Thu Jun 24 2024 17:22:02 GMT+0300 (Москва, стандартное время)",read:!0}]},{id:7,avatar_url:"avatar-6.png",name:"Чат 8",verified:!1,status:"offline",last_seen_date:"Thu Jun 25 2024 00:11:02 GMT+0300 (Москва, стандартное время)",messages:[{id:1,text:"Передай маме, что я буду к 8",sent_date:"Thu Jun 23 2024 15:43:02 GMT+0300 (Москва, стандартное время)",read:!0}]},{id:8,avatar_url:"avatar-7.jpg",name:"Чат 9",verified:!1,status:"offline",last_seen_date:"Thu Jun 25 2024 00:11:02 GMT+0300 (Москва, стандартное время)",messages:[{id:1,text:"Поехали отдыхать🏝",sent_date:"Thu Jun 22 2024 13:39:02 GMT+0300 (Москва, стандартное время)",read:!0}]},{id:9,avatar_url:"",name:"Satoru Gojo",verified:!0,status:"offline",last_seen_date:"Thu Jun 22 2024 00:11:02 GMT+0300 (Москва, стандартное время)",messages:[{id:1,text:"Прибыл",sent_date:"Thu Jun 21 2024 23:11:02 GMT+0300 (Москва, стандартное время)",read:!1}]}],current_chat_index:null,search_string:""}),getters:{getChats:e=>{const t=e.chats.map(s=>l1(s));if(e.search_string.length>=3){const s=t.filter(n=>t.length?Object.keys(t[0]).some(c=>String(n[c]).toLowerCase().includes(e.search_string.toLowerCase())):!0);if(s.length)return e.resetCurrentChat(),s.forEach(n=>{n.is_active=!1}),s}return t},getCurrentSelectedChat:e=>e.getChats[e.current_chat_index]},actions:{selectCurrentChat(e){if(this.search_string="",this.current_chat_index!==null){const s=this.chats[this.current_chat_index];delete s.is_active}const t=this.chats.findIndex(s=>e===s.id);this.chats[t].is_active=!0,this.current_chat_index=t,this.readMessages()},resetCurrentChat(){if(this.current_chat_index!==null){const e=this.chats[this.current_chat_index];delete e.is_active}this.current_chat_index=null},selectDefaultCurrentChat(){this.chats.length&&this.selectCurrentChat(this.chats[0].id)},sendMessage(e){const{messages:t}=this.chats[this.current_chat_index],s={id:t.length?t[t.length-1].id+1:0,text:e,sent_date:new Date,read:!0};t.push(s)},readMessages(){const{messages:e}=this.chats[this.current_chat_index];e.length&&e.forEach(t=>{t.read=!0})}}}),dt={class:"chat-page"},ut={class:"chat-page__sidebar"},_t={key:0,class:"chat-page__messages-content"},ht={class:"chat-page__messages-wrapper"},mt={class:"chat-page__messages"},Ct={class:"chat-page__messages-list"},ft={class:"chat-page__input-bar"},gt={key:1,class:"chat-page__messages-stub"},vt={__name:"ChatView",setup(e){const t=rt(),{getChats:s,getCurrentSelectedChat:n,search_string:c}=ae(t),o=v(""),r=v(null),_=v(!1),g=v(null),A=N(()=>r.value===null?null:r.value?"chat-page__sidebar--animation-open":"chat-page__sidebar--animation-close"),q=p=>{t.selectCurrentChat(p),o.value=""};H(()=>{t.selectDefaultCurrentChat()}),ne(()=>{window.addEventListener("resize",E),g.value=document.querySelector(".chat-page__messages-list"),w()?_.value=!0:_.value=!1}),ie(()=>{window.removeEventListener("resize",E)}),oe(()=>{R()});const R=()=>{g.value.scrollTo(0,g.value.scrollHeight)},E=()=>{if(w())return _.value=!0,typeof r.value=="boolean"?r.value=!1:void 0;_.value=!1},w=()=>document.body.clientWidth<=768,P=()=>{if(w())return typeof r.value=="boolean"?r.value=!1:void 0;r.value=!r.value},W=p=>{p?window.addEventListener("keypress",z):window.removeEventListener("keypress",z)},z=p=>{p.key==="Enter"&&F()},F=()=>{o.value.length&&(t.sendMessage(o.value),o.value="")},T=()=>{alert("Данная опция еще не реализована :)")},X=()=>{alert("Тут могли быть смайлики")};return(p,S)=>(a(),i("div",dt,[l("div",ut,[u(H1,{class:f([A.value]),isFullSize:r.value,animation:"",chats:h(s),isDisabledOpenSideBar:_.value,modelValue:h(c),"onUpdate:modelValue":S[0]||(S[0]=k=>le(c)?c.value=k:null),onSideBarClick:P,onChatSelect:q},null,8,["class","isFullSize","chats","isDisabledOpenSideBar","modelValue"])]),h(n)?(a(),i("div",_t,[u(X1,{class:"chat-page__top-bar",chat:h(n),onSearchClick:T,onCallClick:T,onOptionsClick:T},null,8,["chat"]),l("div",ht,[l("div",mt,[l("div",Ct,[u(ct,{messages:h(n).messages},null,8,["messages"])]),l("div",ft,[u(Z,{modelValue:o.value,"onUpdate:modelValue":S[1]||(S[1]=k=>o.value=k),modelModifiers:{trim:!0},placeholder:"Напишите сообщение",prefixElement:"",suffixElement:"",onFocus_changed:W},{prefixElement:B(()=>[u($,{prefixIcon:"",iconName:"emoji",theme:"grey",onButtonClick:X})]),suffixElement:B(()=>[u($,{prefixIcon:"",iconName:"send",onButtonClick:F,disabled:!o.value.length},null,8,["disabled"])]),_:1},8,["modelValue"])])])])])):(a(),i("div",gt,"У вас нет чатов для начала диалога"))]))}},$t=d(vt,[["__scopeId","data-v-83881d42"]]);export{$t as default};
